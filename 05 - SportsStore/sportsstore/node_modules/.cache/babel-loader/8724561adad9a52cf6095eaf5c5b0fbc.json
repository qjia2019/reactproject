{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\Qianlan Jia\\\\Desktop\\\\coding play\\\\react\\\\05 - SportsStore\\\\sportsstore\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"C:\\\\Users\\\\Qianlan Jia\\\\Desktop\\\\coding play\\\\react\\\\05 - SportsStore\\\\sportsstore\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\Qianlan Jia\\\\Desktop\\\\coding play\\\\react\\\\05 - SportsStore\\\\sportsstore\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Qianlan Jia\\\\Desktop\\\\coding play\\\\react\\\\05 - SportsStore\\\\sportsstore\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Qianlan Jia\\\\Desktop\\\\coding play\\\\react\\\\05 - SportsStore\\\\sportsstore\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Qianlan Jia\\\\Desktop\\\\coding play\\\\react\\\\05 - SportsStore\\\\sportsstore\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Qianlan Jia\\\\Desktop\\\\coding play\\\\react\\\\05 - SportsStore\\\\sportsstore\\\\src\\\\admin\\\\ProductCreator.js\";\nimport React, { Component } from \"react\";\nimport { ValidatedForm } from \"../forms/ValidatedForm\";\nimport { Mutation } from \"react-apollo\";\nimport { storeProduct, updateProduct } from \"./clientMutations\";\nexport var ProductCreator =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ProductCreator, _Component);\n\n  function ProductCreator(props) {\n    var _this;\n\n    _classCallCheck(this, ProductCreator);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProductCreator).call(this, props));\n\n    _this.navigate = function () {\n      return _this.props.history.push(\"/admin/products\");\n    };\n\n    _this.render = function () {\n      return React.createElement(\"div\", {\n        className: \"container-fluid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col bg-dark text-white\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"navbar-brand\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32\n        },\n        __self: this\n      }, \"SPORTS STORE\"))), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col m-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36\n        },\n        __self: this\n      }, React.createElement(Mutation, {\n        mutation: _this.mutation,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }, function (saveMutation, _ref) {\n        var client = _ref.client;\n        return React.createElement(ValidatedForm, {\n          formModel: _this.formModel,\n          defaultAttrs: _this.defaultAttrs,\n          submitCallback: function submitCallback(data) {\n            saveMutation({\n              variables: {\n                product: _objectSpread({}, data, {\n                  price: Number(data.price)\n                })\n              }\n            });\n\n            if (_this.props.mode !== \"edit\") {\n              client.resetStore();\n            }\n\n            _this.navigate();\n          },\n          cancelCallback: _this.navigate,\n          submitText: \"Save\",\n          cancelText: \"Cancel\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 39\n          },\n          __self: this\n        });\n      }))));\n    };\n\n    _this.defaultAttrs = {\n      type: \"text\",\n      required: true\n    };\n    _this.formModel = [{\n      label: \"Name\"\n    }, {\n      label: \"Description\"\n    }, {\n      label: \"Category\"\n    }, {\n      label: \"Price\",\n      attrs: {\n        type: \"number\"\n      }\n    }];\n    _this.mutation = storeProduct;\n\n    if (_this.props.mode === \"edit\") {\n      _this.mutation = updateProduct;\n      _this.formModel = [{\n        label: \"Id\",\n        attrs: {\n          disabled: true\n        }\n      }].concat(_toConsumableArray(_this.formModel)).map(function (item) {\n        return _objectSpread({}, item, {\n          attrs: _objectSpread({}, item.attrs, {\n            defaultValue: _this.props.product[item.label.toLowerCase()]\n          })\n        });\n      });\n    }\n\n    return _this;\n  }\n\n  return ProductCreator;\n}(Component);","map":{"version":3,"sources":["C:\\Users\\Qianlan Jia\\Desktop\\coding play\\react\\05 - SportsStore\\sportsstore\\src\\admin\\ProductCreator.js"],"names":["React","Component","ValidatedForm","Mutation","storeProduct","updateProduct","ProductCreator","props","navigate","history","push","render","mutation","saveMutation","client","formModel","defaultAttrs","data","variables","product","price","Number","mode","resetStore","type","required","label","attrs","disabled","map","item","defaultValue","toLowerCase"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { ValidatedForm } from \"../forms/ValidatedForm\";\nimport { Mutation } from \"react-apollo\";\nimport { storeProduct, updateProduct } from \"./clientMutations\";\n\nexport class ProductCreator extends Component {\n\n    constructor(props) {\n        super(props);\n        this.defaultAttrs = { type: \"text\", required: true };\n        this.formModel = [\n            { label: \"Name\" }, { label: \"Description\" }, \n            { label: \"Category\" }, \n            { label: \"Price\", attrs: { type: \"number\"}}\n        ];\n        this.mutation = storeProduct;\n        if (this.props.mode === \"edit\" ) {\n            this.mutation = updateProduct;\n            this.formModel = [ { label: \"Id\", attrs: { disabled: true }},  \n                     ...this.formModel]\n                .map(item => ({ ...item, attrs: { ...item.attrs, \n                    defaultValue: this.props.product[item.label.toLowerCase()]} }));\n        }\n    }\n\n    navigate = () => this.props.history.push(\"/admin/products\");\n    \n    render = () => {\n        return <div className=\"container-fluid\">\n            <div className=\"row\">\n                <div className=\"col bg-dark text-white\">\n                    <div className=\"navbar-brand\">SPORTS STORE</div>\n                </div>\n            </div>        \n            <div className=\"row\">\n                <div className=\"col m-2\">\n                    <Mutation mutation={ this.mutation }>\n                        { (saveMutation, {client }) => {\n                            return <ValidatedForm formModel={ this.formModel } \n                                defaultAttrs={ this.defaultAttrs } \n                                submitCallback={ data => { \n                                    saveMutation({variables: { product: \n                                        { ...data, price: Number(data.price) }}});\n                                    if (this.props.mode !== \"edit\" ) {\n                                        client.resetStore();\n                                    }\n                                    this.navigate();\n                                }} \n                                cancelCallback={ this.navigate } \n                                submitText=\"Save\" cancelText=\"Cancel\" />\n                        }}\n                    </Mutation>        \n                </div>    \n            </div>        \n        </div>        \n    }\n}\n"]},"metadata":{},"sourceType":"module"}